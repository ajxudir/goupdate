# Test override: Use regex extraction instead of yarn commands for offline testing
# The default config uses `yarn list --json` for maximum compatibility, but tests
# need to work without yarn installed. This override uses regex parsing.
extends: ["default"]

rules:
  yarn:
    lock_files:
      - files: ["**/yarn.lock"]
        format: raw
        extraction:
          # Parse yarn.lock v1 format:
          # lodash@^4.17.21:
          #   version "4.17.21"
          pattern: '(?m)^"?(?P<n>[^@\s"]+)@[^:]+:\s*\n\s+version "(?P<version>[^"]+)"'
